<!DOCTYPE html>
<html lang="en-us">

    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta property="description" content="In my last blog post, i described how i have used jmeter-plugins at my current client site, now i am faced with another problem , i need to be able to run these performance test from command line, in other for these performance tests to be executed in a CI environment such as teamcity.
A quick search brings to light the ant jmeter task which is an ant task for running jmeter test." />
        <meta name="author" content="Samuel Adesoga">

        <link rel="shortcut icon" href="http://example.org/images/favicon.ico">

         <title>Sam Adesoga&#39;s Personal Blog  | Performance Testing experience using Ant and Jmeter - Part 2</title>

        <meta name="generator" content="Hugo 0.40.3" />
        
        
            <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">
        


        
        <link href="https://fonts.googleapis.com/css?family=Nunito+Sans:300,600,700" rel="stylesheet">

        
        <link href="http://example.org/css/bootstrap.min.css" rel="stylesheet">

        
        <link href="http://example.org/css/metismenu.min.css" rel="stylesheet" type="text/css" />

        
        <link rel="stylesheet" type="text/css" href="http://example.org/css/materialdesignicons.min.css">

        
        <link href="http://example.org/css/style.css" rel="stylesheet" type="text/css" />
        <link href="http://example.org/css/default.css" rel="stylesheet" type="text/css" />

    </head>

    <body>
        
        <div id="wrapper">
            
            <div class="topbar-mobile">
    <div class="logo">
        <a href="http://example.org/"><img src="http://example.org/images/logo.png" alt="" class="" style="height: 84px;"></a>
        <button class="button-menu-mobile">
            <i class="mdi mdi-menu"></i>
        </button>
    </div>
</div>
            
            
            <div class="left side-menu">

    <div class="slimscroll-menu" id="remove-scroll">

        <div class="logo">
            <a href="http://example.org/"><img src="http://example.org/images/logo.png" alt="" class="" style="height: 84px;"></a>
            <p class="text-muted">A pragmatic problem solver and business leader with a very solid technical background.</p>
        </div>

        
        <div id="sidebar-menu">
            
            <ul class="metismenu" id="side-menu">

                
                    <li>
                        <a href="http://example.org/">Home</a>
                    </li>
                
                    <li>
                        <a href="http://example.org/categories/feature">Feature</a>
                    </li>
                
                    <li>
                        <a href="http://example.org/categories/technical">Technical</a>
                    </li>
                
                    <li>
                        <a href="http://example.org/categories/agile-delivery">Agile Delivery</a>
                    </li>
                
                    <li>
                        <a href="http://example.org/about/">About</a>
                    </li>
                
                    <li>
                        <a href="http://example.org/contact/">Contact</a>
                    </li>
                

            </ul>

            <div class="copyright-box">
                <p>2018 © Samuel Adesoga. </p>
            </div>

        </div>
        
        <div class="clearfix"></div>

    </div>
    

</div>
            

            <div class="page-wrapper">
                
	<section class="pb-5">
	    <div class="container">

	        <div class="row pt-5">
	            
	            <div class="col-xl-8">

	                
	                <article class="post">
	                    <div class="post-header">
	                        <h2 class="post-title"><a href="#">Performance Testing experience using Ant and Jmeter - Part 2</a></h2>
	                        <ul class="post-meta">
	                            <li><i class="mdi mdi-calendar"></i> February 1, 2012 </li>
	                            <li><i class="mdi mdi-tag-text-outline"></i> 
	                            	
								      
								        <a href="http://example.org/categories/technical">technical</a>,
								      
		            				 
	                            </li>
	                            <li><i class="mdi mdi-comment-multiple-outline"></i> <a href="#">3 Comments</a>
	                            </li>
	                        </ul>
	                    </div>

	                    <div class="post-preview">
	                        <a href="blog-single.html"><img src="http://example.org/images/blog/blog-1.jpg" alt="" class="img-fluid rounded"></a>
	                    </div>

	                    <div class="blog-detail-description">
	                        <p>In my last <a href="/post//2012/02/01/performance-testing-experience-using-ant-and-jmeter-part-1/">blog post</a>, i described how i have used <a href="http://code.google.com/p/jmeter-plugins/">jmeter-plugins</a> at my current client site, now i am faced with another problem , i need to be able to run these performance test from command line, in other for these performance tests to be executed in a CI environment such as teamcity.</p>

<p>A quick search brings to light the <a href="http://www.programmerplanet.org/pages/projects/jmeter-ant-task.php">ant jmeter task</a> which is an ant task for running jmeter test. This fulfils a number of the objectives i have set in this <a href="/post//2012/02/01/performance-testing-experience-using-ant-and-jmeter-part-1/" title="Performance Testing experience using Ant and Jmeter – Part 1">first part</a> of this blog post as teamcity has got an inbuilt runner for ant. To install this, you would need to include ant-jmeter-1.1.1.jar in your Ant classpath. See the <a href="http://www.programmerplanet.org/pages/projects/jmeter-ant-task.php">link</a> for more instructions.</p>

<p>And the author of the ant jmeter tasks has alsop produced an <a href="http://www.programmerplanet.org/media/ant-jmeter/jmeter-results-report.xsl">xsl file </a> which can be fed into the xslt ant task to produce a nicely formatted html result page.</p>

<p>I have put all these into an ant script that looks like the below:</p>

<p>[sourcecode]</p>

<p>&lt;project name=&quot;Performance Testing for my project&quot; basedir=&quot;.&quot; xmlns:ac=&quot;antlib:net.sf.antcontrib&quot;&gt;
  &lt;taskdef uri=&quot;antlib:net.sf.antcontrib&quot; resource=&quot;net/sf/antcontrib/antlib.xml&quot;&gt;
    &lt;classpath&gt;
    &lt;pathelement location=&quot;${basedir}/lib/ant-contrib-1.0b3.jar&quot;/&gt;
  &lt;/classpath&gt;
  &lt;/taskdef&gt;</p>

<p>&lt;target name=&quot;clean&quot;&gt;
    &lt;delete includeemptydirs=&quot;true&quot;&gt;
      &lt;fileset dir=&quot;Results&quot; excludes=&quot;**/PerformanceCharts.html&quot;/&gt;
    &lt;/delete&gt;
  &lt;/target&gt;</p>

<p>&lt;target name=&quot;run-jmeter&quot; depends=&quot;clean&quot;&gt;
    &lt;taskdef name=&quot;jmeter&quot; classpath=&quot;${basedir}/jakarta-jmeter-2.5.1/extras/ant-jmeter-1.1.0.jar&quot;
             classname=&quot;org.programmerplanet.ant.taskdefs.jmeter.JMeterTask&quot;/&gt;</p>

<pre><code>&amp;lt;jmeter
        jmeterhome=&amp;quot;${basedir}/jakarta-jmeter-2.5.1&amp;quot;
        resultlog=&amp;quot;${basedir}/Results/JMeterResults.xml&amp;quot;&amp;gt;
  &amp;lt;testplans dir=&amp;quot;${basedir}/TestPlan&amp;quot; includes=&amp;quot;*.jmx&amp;quot;/&amp;gt;
  &amp;lt;property name=&amp;quot;request.threads&amp;quot; value=&amp;quot;300&amp;quot;/&amp;gt;
  &amp;lt;property name=&amp;quot;request.loop&amp;quot; value=&amp;quot;10&amp;quot;/&amp;gt;
&amp;lt;/jmeter&amp;gt;
</code></pre>

<p>&lt;/target&gt;</p>

<p>&lt;target name=&quot;create-reports&quot; depends=&quot;run-jmeter&quot;&gt;
    &lt;xslt
            in=&quot;${basedir}/Results/JMeterResults.xml&quot;
            out=&quot;${basedir}/Results/JMeterResults.html&quot;
            style=&quot;${basedir}/jakarta-jmeter-2.5.1/extras/jmeter-results-detail-report_21.xsl&quot;/&gt;
  &lt;/target&gt;</p>

<p>&lt;target name=&quot;create-graphs&quot; depends=&quot;create-reports&quot;&gt;
    &lt;ac:for param=&quot;reportType&quot; list=&quot;TimesVsThreads,ResponseTimesOverTime,ThreadsStateOverTime&quot;&gt;
      &lt;sequential&gt;
        &lt;java jar=&quot;${basedir}/jakarta-jmeter-2.5.1/lib/ext/CMDRunner.jar&quot; fork=&quot;true&quot;&gt;
          &lt;arg value=&quot;&ndash;tool&quot;/&gt;
          &lt;arg value=&quot;Reporter&quot;/&gt;
          &lt;arg value=&quot;&ndash;generate-png&quot;/&gt;
          &lt;arg value=&quot;${basedir}/Results/@{reportType}.png&quot;/&gt;
          &lt;arg value=&quot;&ndash;input-jtl&quot;/&gt;
          &lt;arg value=&quot;${basedir}/Results/JMeterResults.xml&quot;/&gt;
          &lt;arg value=&quot;&ndash;plugin-type&quot;/&gt;
          &lt;arg value=&quot;@{reportType}&quot;/&gt;
          &lt;arg value=&quot;&ndash;width&quot;/&gt;
          &lt;arg value=&quot;800&quot;/&gt;
          &lt;arg value=&quot;&ndash;height&quot;/&gt;
          &lt;arg value=&quot;600&quot;/&gt;
        &lt;/java&gt;
      &lt;/sequential&gt;
    &lt;/ac:for&gt;
  &lt;/target&gt;</p>

<p>&lt;target name=&quot;main&quot; depends=&quot;clean,run-jmeter,create-reports,create-graphs&quot;/&gt;
&lt;/project&gt;</p>

<p>[/sourcecode]</p>

<p>I have added an additional target for  deleting the test result files as jmeter would append subsequent test results to the previous test results in the file, if file is not deleted.</p>

<p>You would also notice that there is a target named &ldquo;create-graphs&rdquo;, this uses the <a href="http://code.google.com/p/jmeter-plugins/wiki/JMeterPluginsCMD">CMDRunner.jar</a> which is a command line utility shipped with <a href="http://code.google.com/p/jmeter-plugins">jmeter-plugins</a>. This tool has helped me to re-create the graphs which i referred to in<a href="/post//2012/02/01/performance-testing-experience-using-ant-and-jmeter-part-1/" title="Performance Testing experience using Ant and Jmeter – Part 1"> part 1 of the blog</a>. It parses the xml result created by the ant jmeter task and creates png images for each of the graphs specified.</p>

<p>This graph images can then be embedded into an html page to be displayed in teamcity.</p>

<p>I hope this helps someone.</p>


	                        <div class="mt-5">
	                            <h6>Tags:</h6>
						            
							            <div class="tagcloud">
									      
									        <a href="http://example.org/tags/performance-testing">performance testing</a>
									      
									        <a href="http://example.org/tags/jmeter">Jmeter</a>
									      
									        <a href="http://example.org/tags/test-automation">Test Automation</a>
									      
							            </div>
						            
	                        </div>

	                        <div class="mt-5 text-center">
	                            <h5 class="page-title-alt"><span>You Might Also Like</span></h5>
	                        </div>
	                        <div class="row">
					           
							   	<div class="col-sm-4">
					               	<article class="related-post">
					                  <div class="post-preview">
					                     <a href="/posts/api-tests-and-ui-test-should-be-written-in-same-programming-language/"><img src="http://example.org/images/blog/blog-2.jpg" alt="" class="img-fluid rounded"></a>
					                  </div>
					                  <div class="post-header">
					                     <h6><a href="/posts/api-tests-and-ui-test-should-be-written-in-same-programming-language/" title="">Should API test and UI Acceptance Tests be written in the same programming language?</a></h6>
					                     <p> </p>
					                     <p class="post-date">August 24, 2017</p>
					                  </div>
					               	</article>
				            	</div>
							  
							   	<div class="col-sm-4">
					               	<article class="related-post">
					                  <div class="post-preview">
					                     <a href="/posts/testing-an-asynchronous-system-2/"><img src="http://example.org/images/blog/blog-2.jpg" alt="" class="img-fluid rounded"></a>
					                  </div>
					                  <div class="post-header">
					                     <h6><a href="/posts/testing-an-asynchronous-system-2/" title="">Testing an Asynchronous System - Part 2</a></h6>
					                     <p> </p>
					                     <p class="post-date">January 6, 2017</p>
					                  </div>
					               	</article>
				            	</div>
							  
							   	<div class="col-sm-4">
					               	<article class="related-post">
					                  <div class="post-preview">
					                     <a href="/posts/testing-an-asynchronous-system/"><img src="http://example.org/images/blog/blog-2.jpg" alt="" class="img-fluid rounded"></a>
					                  </div>
					                  <div class="post-header">
					                     <h6><a href="/posts/testing-an-asynchronous-system/" title="">Testing an Asynchronous System</a></h6>
					                     <p> </p>
					                     <p class="post-date">January 6, 2017</p>
					                  </div>
					               	</article>
				            	</div>
							  
						  </div>                

	                        <div class="mt-5">
	                            <h5 class="page-title-alt"><span>Comments</span></h5>
	                        </div>

	                        <ul class="media-list list-unstyled">

	                            <li class="media">
	                                <img class="d-flex mr-3 rounded-circle" src="images/user/user-2.png" alt="Generic placeholder image">
	                                <div class="media-body">
	                                    <a href="#" class="text-custom reply-btn"><i class="mdi mdi-reply"></i>&nbsp; Reply</a>
	                                    <h4 class="media-heading"><a href="">Ronda Otoole</a></h4>
	                                    <p class="text-muted post-date">Jun 23, 2017, 11:45 am</p>
	                                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam viverra euismod odio, gravida pellentesque urna varius vitae. Sed dui lorem, adipiscing in adipiscing et, interdum nec metus. Mauris ultricies, justo eu convallis placerat, felis enim.</p>

	                                    <div class="media">
	                                        <img class="d-flex mr-3 rounded-circle" src="images/user/user-3.png" alt="Generic placeholder image">
	                                        <div class="media-body">
	                                            <a href="#" class="text-custom reply-btn"><i class="mdi mdi-reply"></i>&nbsp; Reply</a>
	                                            <h4 class="media-heading"><a href="">James Whitley</a></h4>
	                                            <p class="text-muted post-date">Jun 23, 2017, 11:45 am</p>
	                                            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam viverra euismod odio, gravida pellentesque urna varius vitae. Sed dui lorem, adipiscing in adipiscing et, interdum nec metus. Mauris ultricies, justo eu convallis placerat, felis enim.</p>
	                                        </div>
	                                    </div>
	                                </div>
	                            </li>      

	                        </ul>

	                        <div class="mt-5">
	                            <h5 class="page-title-alt"><span>Leave a reply</span></h5>
	                        </div>

	                        <form action="#" method="post" class="mt-4">
	                            <div class="row">
	                                <div class="col-sm-6">
	                                    <div class="form-group">
	                                        <input id="author" class="form-control" placeholder="Name*" name="author" type="text" required="">
	                                    </div>
	                                </div>

	                                <div class="col-sm-6">
	                                    <div class="form-group">
	                                        <input id="email" class="form-control" placeholder="Email*" name="email" type="text" required="">
	                                    </div>
	                                </div>
	                            </div>
	                            <div class="row">
	                                <div class="col-sm-12">
	                                    <div class="form-group">
	                                        <input id="subject" class="form-control" placeholder="Website" name="subject" type="text">
	                                    </div>
	                                </div>
	                            </div>

	                            <div class="row">
	                                <div class="col-sm-12">
	                                    <div class="form-group">
	                                        <textarea id="comment" class="form-control" rows="5" placeholder="Your Message*" name="comment" required=""></textarea>
	                                    </div>
	                                </div>
	                            </div>

	                            <div class="row">
	                                <div class="col-sm-12">
	                                    <div class="form-group">
	                                        <button name="submit" type="submit" id="submit" class="btn btn-dark">Post Comment</button>
	                                    </div>
	                                </div>
	                            </div>
	                        </form>

	                    </div>

	                </article>
	                

	            </div>
	            

				
	            <div class="col-xl-4">
        			<div class="sidebar">
    
    <aside class="widget widget_search">
        <form>
            <input class="form-control pr-5" type="search" placeholder="Search...">
            <button class="search-button" type="submit"><span class="mdi mdi-magnify"></span></button>
        </form>
    </aside>

    <aside class="widget about-widget">
        <div class="widget-title">About Me</div>

        <div class="text-center">
            <img src="http://example.org/images/photo.jpg" alt="About Me" class="rounded-circle">

            <p>Quis vero phasellus hac nullam, in quam vitae duis adipiscing mauris leo, laoreet eget at quis, ante vestibulum vivamus vel. Sapien lobortis, eget orci purus amet pede, consectetur neque risus.</p>
        </div>

    </aside>

    <aside class="widget about-widget">
        <div class="widget-title">Subscribe & Follow</div>

        <ul class="socials">
            <li><a href="https://www.facebook.com/mistar.adesoga"><i class="mdi mdi-facebook"></i></a></li>
            <li><a href="https://twitter.com/sadesoga"><i class="mdi mdi-twitter"></i></a></li>
            <li><a href="https://www.instagram.com/mistaradesoga/"><i class="mdi mdi-instagram"></i></a></li>
            <li><a href="https://uk.linkedin.com/in/samueladesoga"><i class="mdi mdi-linkedin"></i></a></li>
        </ul>

    </aside>

    
    <aside class="widget widget_categories">
        <div class="widget-title">Categories</div>
        <ul>
            
                <li><a href="http://example.org/categories/agile-delivery">Agile delivery &nbsp;<span>(8)</span></a></li>
            
                <li><a href="http://example.org/categories/technical">Technical &nbsp;<span>(47)</span></a></li>
            
        </ul>
    </aside>

    
    <aside class="widget widget_recent_entries_custom">
        <div class="widget-title">Popular Posts</div>
        <ul>
            
        </ul>
    </aside>

    
    <aside class="widget">
        <div class="widget-title">Archives</div>

        <ul>
            <li><a href="#">March 2017</a> (40)</li>
            <li><a href="#">April 2017</a> (08)</li>
            <li><a href="#">May 2017</a> (11)</li>
            <li><a href="#">Jun 2017</a> (21)</li>
        </ul>

    </aside>

    
    <aside class="widget widget_tag_cloud">
        <div class="widget-title">Tags</div>
        <div class="tagcloud">
            
                <a href="/tags/active-record">active-record</a>
            
                <a href="/tags/automation">automation</a>
            
                <a href="/tags/aws-s3">aws-s3</a>
            
                <a href="/tags/bdd">bdd</a>
            
                <a href="/tags/blogger">blogger</a>
            
                <a href="/tags/build">build</a>
            
                <a href="/tags/conference">conference</a>
            
                <a href="/tags/cqrs">cqrs</a>
            
                <a href="/tags/css-selectors">css-selectors</a>
            
                <a href="/tags/database">database</a>
            
                <a href="/tags/deployment">deployment</a>
            
                <a href="/tags/development">development</a>
            
                <a href="/tags/event-based-architecture">event-based-architecture</a>
            
                <a href="/tags/exploratory-testing">exploratory-testing</a>
            
                <a href="/tags/feature-driven-development">feature-driven-development</a>
            
                <a href="/tags/firefox">firefox</a>
            
                <a href="/tags/hardware">hardware</a>
            
                <a href="/tags/iehta">iehta</a>
            
                <a href="/tags/iexplore">iexplore</a>
            
                <a href="/tags/iexploreproxy">iexploreproxy</a>
            
                <a href="/tags/image-upload">image-upload</a>
            
                <a href="/tags/jar">jar</a>
            
                <a href="/tags/java">java</a>
            
                <a href="/tags/javascipt">javascipt</a>
            
                <a href="/tags/javascript-events">javascript-events</a>
            
                <a href="/tags/jmeter">jmeter</a>
            
                <a href="/tags/kanban">kanban</a>
            
                <a href="/tags/meeting">meeting</a>
            
                <a href="/tags/microsoft">microsoft</a>
            
                <a href="/tags/outlook">outlook</a>
            
                <a href="/tags/performance-testing">performance-testing</a>
            
                <a href="/tags/qa">qa</a>
            
                <a href="/tags/regex">regex</a>
            
                <a href="/tags/ruby">ruby</a>
            
                <a href="/tags/ruby-on-rails">ruby-on-rails</a>
            
                <a href="/tags/selenium">selenium</a>
            
                <a href="/tags/selenium-server">selenium-server</a>
            
                <a href="/tags/software-testing">software-testing</a>
            
                <a href="/tags/start-up">start-up</a>
            
                <a href="/tags/sysadmin">sysadmin</a>
            
                <a href="/tags/technical-testing">technical-testing</a>
            
                <a href="/tags/test">test</a>
            
                <a href="/tags/test-automation">test-automation</a>
            
                <a href="/tags/test-strategy">test-strategy</a>
            
                <a href="/tags/testing">testing</a>
            
                <a href="/tags/training">training</a>
            
                <a href="/tags/ubuntu">ubuntu</a>
            
                <a href="/tags/watir-webdriver">watir-webdriver</a>
            
                <a href="/tags/web-application">web-application</a>
            
                <a href="/tags/windows">windows</a>
            
                <a href="/tags/windows-application">windows-application</a>
            
                <a href="/tags/wordpress">wordpress</a>
            
                <a href="/tags/xp-antirus-2009">xp-antirus-2009</a>
            
                <a href="/tags/xpath">xpath</a>
            
        </div>
    </aside>
</div>
    			</div>
				

	        </div>

	    </div>
	    
	</section>

            </div>
        </div>
        
        <script src="http://example.org/js/jquery.min.js"></script>
        <script src="http://example.org/js/popper.min.js"></script>
        <script src="http://example.org/js/bootstrap.min.js"></script>
        <script src="http://example.org/js/jquery.easing.min.js"></script>
        <script src="http://example.org/js/metisMenu.min.js"></script>
        
        <script src="http://example.org/js/jquery.app.js"></script>
    </body>

</html>