+++
date = "2008-08-29 11:10:00"
title = "Nant SCP Task: deploy file to a remote server"
draft = "false"
categories = ["Technical"]
tags = ["Deployment"]
author = "samueladesoga"
+++

Actually started the task by attempting to use MSBuild to deploy my application to a remote server.<br />which would require some secure means, scp, sftp or something of that sort.<br />The closest i got was <a href="http://www.tamirgal.com/home/dev.aspx?Item=SharpSsh">SSHSharp</a> which was written by a third party and not thoroughly tested,<br />i then decided maybe that wasn't the path to go.<br /><br />Tried to go for Nant instead, and found that Nant core doesnt have a task for secure copy,<br />Hence, the other option was <a href="http://nantcontrib.sourceforge.net/">NantContrib</a> which seem okay to an extent, except for incomplete documentation.<br /><br />Once big issue was having a "scp" failed to start ---&gt; The file cannot be found error when i tried to execute the build file. I spent a great deal of my time trying to figure out what file was not found, thinking it was my file that i intend to copy that wasn't found.<br /><br />Actually it was the program "<span class="blsp-spelling-error" id="SPELLING_ERROR_0">scp</span>.<span class="blsp-spelling-error" id="SPELLING_ERROR_1">exe</span>" that could not be found, it took a lot of time and guesses, as there weren't a lot of resources on  the<br />search engines about this. May be i was just being dumb. So i had to install <span class="blsp-spelling-error" id="SPELLING_ERROR_2">pscp</span> on my machine and add that to the path.<br /><br />and it works fine...........<br /><br />Summary is that you for you to use the <span class="blsp-spelling-error" id="SPELLING_ERROR_3">scp</span> task,<br /><br />Download the <span class="blsp-spelling-error" id="SPELLING_ERROR_4">nantcontrib</span> <span class="blsp-spelling-error" id="SPELLING_ERROR_5">dll</span> files and read the "<span class="blsp-spelling-error" id="SPELLING_ERROR_6">ReadMe</span>.<span class="blsp-spelling-error" id="SPELLING_ERROR_7">txt</span>"<br /><br /><br />And add that to your Target with uses the <span class="blsp-spelling-error" id="SPELLING_ERROR_8">SCP</span> task<br /><br />loadtasks assembly="${project::get-base-directory()}/lib_build/nantcontrib-0.85/bin/NAnt.Contrib.Tasks.dll"<br /><br />This would the directory where your .<span class="blsp-spelling-error" id="SPELLING_ERROR_9">dll</span> files are.<br />Make sure that that <span class="blsp-spelling-error" id="SPELLING_ERROR_10">scp</span> which is default is installed on your machine, you could actually use other application , e.g  <span class="blsp-spelling-error" id="SPELLING_ERROR_11">pscp</span>, ssh bu that would have to the specified in the <span class="blsp-spelling-error" id="SPELLING_ERROR_12">SCP</span> task.<br /><br />Finally, This is what my file looked like:<br /><br />&lt;?xml version="1.0"?&gt;<br />&lt;project name="Project Name" default="DeployToPlay" basedir="."&gt;<br />&lt;property name="debug" value="true" overwrite="false" /&gt;<br /><br />&lt;target name ="DeployToServer"&gt;<br />  &lt;loadtasks assembly="${project::get-base-directory()}/lib_build/nantcontrib-0.85/bin/NAnt.Contrib.Tasks.dll" /&gt;<br /><br />  &lt;zip zipfile="myapplication.zip" &gt;<br />    &lt;fileset&gt;<br />      &lt;include name = "*.aspx;*.asax;web.config"/&gt;<br />      &lt;include name = "Content\**\*.*"/&gt;<br />      &lt;include name = "home\**\*.*"/&gt;<br />      &lt;include name = "Views\**\*.*"/&gt;<br />      &lt;include name = "bin\Debug\**\*.*"/&gt;<br />    &lt;/fileset&gt;<br />  &lt;/zip&gt;<br />  &lt;scp file="myapplication.zip" server="myservername" path="/pathOnTheServer" /&gt;<br />&lt;/target&gt;<br /><br />&lt;/project&gt;</code>

