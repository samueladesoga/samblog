+++
date = "2010-03-10 23:44:00"
title = "Blank cells in step tables in cucumber 0.3.11 is represented as nil"
draft = "false"
categories = ["Technical"]
tags = ["BDD", "Feature Driven Development", "Test Automation" ]
author = "samueladesoga"
+++

In my current job, I have been doing a lot of acceptance test using <a href="http://cukes.info/">Cucumber</a>, <a href="http://watir.com/"><span class="blsp-spelling-error" id="SPELLING_ERROR_0">Watir</span></a> and <a href="http://rspec.info/"><span class="blsp-spelling-error" id="SPELLING_ERROR_1">RSpec</span></a>, obvious all in <a href="http://www.ruby-lang.org/en/">Ruby</a>. I have been using <a href="http://cukes.info/">Cucumber</a> 0.6.x, in which blank cells in the step table are represented by empty string (""). This was okay for me until today when i had to use a previous version of <a href="http://cukes.info/">Cucumber</a> 0.3.11 due to reasons including compatibility with other projects in the CI build. And my tests start failing because blank cells are represented as nil.<br /><br />There was f<a href="https://rspec.lighthouseapp.com/projects/16211/tickets/396-nil-values-in-a-fixture-table">ix put in the current release of cucumber to change blanks to be represented </a>as empty and not as nil(for whatever reason, which i don't really care, as both nil and "" has got its own arguments.)<br /><br />Some code to explain this, Assuming i have a step table as below:<br /><br />Given that i have the following detail in my app<br />|Header1|Header2|Header3|Header4|<br />|Body1    |Body2    |Body3    |           |<br /><br />Notice that the last column of the second row is blank, this would be represented as nil in cucumber 0.3.11 while it is represented as empty string "" in cucumber 0.6.x<br /><br />In my step definition file, I have fixed this by converting every nil value to empty ("")<br /><br />Given /have the following detail/ do |table|<br />     table.rows.each do |row|<br />            row.map! {|value| convert_nil_to_empty_string(value)}<br />           # do some other stuff with row as every nil object has been converted to empty string<br />           # The map! method for Array, allow you to invoke the block for the array and it amends<br />           #  the <span class="blsp-spelling-corrected" id="SPELLING_ERROR_2">existing</span> array    <br />     end<br />end<br /><br />The method which i call to convert nil to empty is below:<br /><br />def convert_nil_to_empty_string(test_string)<br />     if (test_string.nil?)<br />         return ""<br />    else<br />        return test_string<br />    end<br />end<br /><br />There might have been a better way to do this but this surely worked for me in this scenario and the reason i decided to use a method was that the map! method would only allow me use the variable "value" only once in the block. I am sure there are some <span class="blsp-spelling-error" id="SPELLING_ERROR_3">rubyist</span> out there, that could advice me on some shorthand for this  .......  Hope it helps you too

